<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<link rel="stylesheet" href="./css/styles.css" />
	<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&amp;display=swap" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet" />
	<title>COP4331 UCF Paradise Coffee Contact Manager</title>
	<script src="./js/code.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			readCookie();
			var el = document.getElementById('contactsWelcomeTitle');
			if (el && typeof firstName !== 'undefined' && firstName) {
				var name = firstName + (lastName ? ' ' + lastName : '');
				el.textContent = 'Welcome back, ' + name + '!';
			}

			var heroBg = document.getElementById('contactsHeroBg');
			var heroMsg = document.getElementById('contactsHeroMessage');
			var section = document.getElementById('contactsSection');
			var defaultImg = "url('./images/rickTakingOrder.jpg')";
			var hoverImg = "url('./images/rickTalking.jpg')";
			var defaultMsg = '" It\'s another day here at UCF Paradise Coffee. What contacts would you like to do today? "';
			var hoverMsg = '" You can search contacts, add contacts, edit and delete existing contacts. "';
			if (heroBg && section) {
				section.addEventListener('mouseenter', function() {
					heroBg.style.backgroundImage = hoverImg;
					if (heroMsg) heroMsg.textContent = hoverMsg;
				});
				section.addEventListener('mouseleave', function() {
					heroBg.style.backgroundImage = defaultImg;
					if (heroMsg) heroMsg.textContent = defaultMsg;
				});
			}

			document.getElementById('contactsSearchInput').addEventListener('input', searchContacts);
			document.getElementById('contactsSearchInput').addEventListener('keyup', function(e) { if (e.key === 'Enter') searchContacts(); });
			document.addEventListener('keydown', function(e) {
				if (e.key === 'Escape' && document.getElementById('contactModal').classList.contains('contacts-modal-open')) closeContactModal();
			});
			searchContacts();
		});
	</script>
</head>
<body class="contacts-page-body">
	<!-- Header -->
	<header class="contacts-header-bar">
		<div class="contacts-header-inner">
			<div class="contacts-header-left">
				<img alt="Starbucks Logo" class="contacts-logo-img" src="./images/logoPng.png" />
				<div class="contacts-welcome-text">
					<h1 class="contacts-welcome-title" id="contactsWelcomeTitle">Welcome back!</h1>
				</div>
			</div>
			<div class="contacts-header-nav">
				<a href="aboutUs.html" class="contacts-btn-link contacts-btn-about">About Us</a>
				<button type="button" class="contacts-btn-link contacts-btn-logout" onclick="doLogout();">Logout</button>
			</div>
		</div>
	</header>
	<!-- Main Content Grid -->
	<main class="contacts-main">
		<!-- Left Side: Barista Profile (30%) -->
		<aside class="contacts-aside">
			<div class="contacts-hero-card">
				<div class="contacts-hero-overlay"></div>
				<div class="contacts-hero-bg" id="contactsHeroBg" style="background-image: url('./images/rickTakingOrder.jpg');"></div>
				<div class="contacts-hero-caption">
					<h3 class="contacts-hero-name">Dr. Richard Leinecker</h3>
					<p class="contacts-hero-message" id="contactsHeroMessage">" It's another day here at UCF Paradise Coffee. 
						What would you like to do today? "</p>
						
					<p class="contacts-hero-role">Barista, Orlando</p>
					<div class="contacts-hero-badges">
						<span class="contacts-badge">Top Performer</span>
						<span class="contacts-badge">30 yrs experience</span>
					</div>
				</div>
			</div>
		</aside>
		<!-- Right Side: Contact Management (70%) -->
		<section class="contacts-section" id="contactsSection">
			<!-- Management Controls Card -->
			<div class="contacts-card-box">
				<div class="contacts-card-header">
					<div>
						<h2 class="contacts-card-title">Manage Contacts</h2>
					</div>
					<button type="button" class="contacts-btn-add-contact" onclick="openAddContactModal();">
						<span class="material-symbols-outlined contacts-add-icon">add</span>
						Add Contact
					</button>
				</div>
				<!-- Search Bar -->
				<div class="contacts-search-wrap">
					<span class="material-symbols-outlined contacts-search-icon">search</span>
					<input id="contactsSearchInput" class="contacts-search-input" placeholder="Search contacts by name or role..." type="text" />
				</div>
				<!-- Contact List Table -->
				<div class="contacts-table-scroll">
					<table class="contacts-table-new">
						<thead>
							<tr class="contacts-table-head-row">
								<th class="contacts-table-th">first name</th>
								<th class="contacts-table-th">last name</th>
								<th class="contacts-table-th">Email</th>
								<th class="contacts-table-th">phone</th>
								<th class="contacts-table-th contacts-table-th-actions">Actions</th>
							</tr>
						</thead>
						<tbody class="contacts-table-body" id="contactsTableBody">
							<!-- Rows populated by script -->
						</tbody>
					</table>
				</div>
				<!-- Footer Stats -->
				<div class="contacts-card-footer">
					<p class="contacts-footer-text" id="contactsFooterText">Showing 0 partners</p>
					<div class="contacts-pagination-btns">
						<button type="button" class="contacts-btn-pagination" aria-label="Previous">
							<span class="material-symbols-outlined">chevron_left</span>
						</button>
						<button type="button" class="contacts-btn-pagination" aria-label="Next">
							<span class="material-symbols-outlined">chevron_right</span>
						</button>
					</div>
				</div>
			</div>
		</section>
	</main>
	<!-- Add/Edit Contact Modal -->
	<div id="contactModal" class="contacts-modal" data-mode="add" data-contact-id="">
		<div class="contacts-modal-backdrop" onclick="closeContactModal();"></div>
		<div class="contacts-modal-content">
			<div class="contacts-modal-header">
				<h3 id="contactModalTitle" class="contacts-modal-title">Add Contact</h3>
				<button type="button" class="contacts-modal-close" aria-label="Close" onclick="closeContactModal();">
					<span class="material-symbols-outlined">close</span>
				</button>
			</div>
			<div class="contacts-modal-body">
				<label for="contactFirstName">First name</label>
				<input id="contactFirstName" type="text" placeholder="John" onkeydown="if(event.key==='Enter')submitContactForm();" />
				<label for="contactLastName">Last name</label>
				<input id="contactLastName" type="text" placeholder="Doe" onkeydown="if(event.key==='Enter')submitContactForm();" />
				<label for="contactPhone">Phone</label>
				<input id="contactPhone" type="tel" placeholder="555-123-4567" onkeydown="if(event.key==='Enter')submitContactForm();" />
				<label for="contactEmail">Email</label>
				<input id="contactEmail" type="email" placeholder="john@example.com" onkeydown="if(event.key==='Enter')submitContactForm();" />
				<p id="contactFormResult" class="contacts-form-result"></p>
			</div>
			<div class="contacts-modal-footer">
				<button type="button" class="contacts-btn-secondary" onclick="closeContactModal();">Cancel</button>
				<button type="button" class="contacts-btn-primary-modal" onclick="submitContactForm();">Save</button>
			</div>
		</div>
	</div>

	<!-- Bottom Navigation (Mobile Only) -->
	<nav class="contacts-bottom-nav">
		<a class="contacts-nav-link contacts-nav-link-active" href="#">
			<span class="material-symbols-outlined">house</span>
			<span class="contacts-nav-label">Home</span>
		</a>
		<a class="contacts-nav-link" href="#">
			<span class="material-symbols-outlined">contacts</span>
			<span class="contacts-nav-label">Contacts</span>
		</a>
		<a class="contacts-nav-link" href="#">
			<span class="material-symbols-outlined">settings</span>
			<span class="contacts-nav-label">Settings</span>
		</a>
	</nav>
</body>
</html>
